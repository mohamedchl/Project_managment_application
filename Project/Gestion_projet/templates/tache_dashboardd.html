<!DOCTYPE html>
<html lang="fr" >
<head>
    
        
        
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <!--  Prevent admin panel being crawled by search engines -->
    <meta name="robots" content="none, noarchive">

    <title>Sélectionnez l’objet projet à changer | Gestion de projet</title>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="/static/vendor/fontawesome-free/css/all.min.css">

    <!-- Bootstrap and adminLTE -->
    <link rel="stylesheet" href="/static/vendor/adminlte/css/adminlte.min.css" id="adminlte-css">

    <!-- Bootswatch theme -->
    
        <link rel="stylesheet" href="/static/vendor/bootswatch/flatly/bootstrap.min.css" id="jazzmin-theme" />
    

    

    <!-- Custom fixes for django -->
    <link rel="stylesheet" href="/static/jazzmin/css/main.css">

    

    <!-- favicons -->
    <link rel="shortcut icon" href="/static/vendor/adminlte/img/AdminLTELogo.png" type="image/png">
    <link rel="icon" href="/static/vendor/adminlte/img/AdminLTELogo.png" sizes="32x32" type="image/png">

    
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    

    
     
    <link rel="stylesheet" href="/static/vendor/select2/css/select2.min.css">

    
        <script type="text/javascript" src="/admin/jsi18n/"></script>
    
    
    

    
     
    <script src="/static/admin/js/vendor/jquery/jquery.js"></script>
<script src="/static/admin/js/jquery.init.js"></script>
<script src="/static/admin/js/core.js"></script>
<script src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
<script src="/static/admin/js/actions.js"></script>
<script src="/static/admin/js/urlify.js"></script>
<script src="/static/admin/js/prepopulate.js"></script>
<script src="/static/admin/js/vendor/xregexp/xregexp.js"></script>

</head>
<body class="hold-transition sidebar-mini   app-Gestion_projet model-projet change-list accent-primary theme-flatly " data-admin-utc-offset="0">

<div class="wrapper">
    
            

            <aside class="main-sidebar elevation-4 sidebar-dark-primary" id="jazzy-sidebar">
                <a href="/admin/" class="brand-link " id="jazzy-logo">
                    <img src="/static/vendor/adminlte/img/AdminLTELogo.png" alt="Gestion de projet Logo" class="img-circle brand-image elevation-3" style="opacity: .8">
                    <span class="brand-text font-weight-light">Gestion de Projet</span>
                </a>

                <div class="sidebar">
                    <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                        <div class="image">
                            
                                <i class="fas fa-inverse user-profile fa-user-circle"></i>
                            
                        </div>
                        <div class="info">
                            {% if user_is_admin%}
                                <a href="/admin/auth/user/1/change/" class="d-block">admin</a>
                            {% elif user_is_chefProjet %}
                                <span class="d-block" style="color: white;">{{ request.user }}</span>
                            {% endif %}
                        </div>
                    </div>

                    <nav class="mt-2">
                        <ul class="nav nav-pills nav-sidebar flex-column " data-widget="treeview" role="menu" data-collapsible="false">

                            <li class="nav-item">
                                <a href="/admin/" class="nav-link">
                                    <i class="nav-icon fas fa-th-large"></i>
                                    <p>Tableau de bord</p>
                                </a>
                            </li>
                            <li class="nav-header" id="tables-de-bord-header">Tables de bord d'analyse</li>
                            <li class="nav-item" id="projet-dashboard-item">
                                <a href="/projet-dashboard/" class="nav-link">
                                    <i class="nav-icon fas fa-chart-line"></i> <p>Tables de bord des projets</p>
                                </a>
                            </li>
                            <li class="nav-item" id="tache-dashboard-item">
                                <a href="/tache-dashboard/" class="nav-link">
                                    <i class="nav-icon fas fa-chart-line"></i> <p>Tables de bord des taches</p>
                                </a>
                            </li>
                            
                            {% if user_is_admin%}
                               <li class="nav-header">Authentification et autorisation</li>
                                    
                                    
                                        <li class="nav-item">
                                            
                                            <a href="/admin/auth/group/" class="nav-link">
                                                <i class="nav-icon fas fa-users"></i> <p>Groupes</p>
                                            </a>
                                        
                                        </li>
                                    
                                    
                                        <li class="nav-item">
                                            
                                            <a href="/admin/auth/user/" class="nav-link">
                                                <i class="nav-icon fas fa-user"></i> <p>Utilisateurs</p>
                                            </a>
                                        
                                        </li>
                                    
                            {% endif %}
                                
                            <li class="nav-header">Gestion_Projet</li>
                                    
                                    
                                    
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/comission/" class="nav-link">
                                    <i class="nav-icon fas fa-calendar-alt"></i> <p>Comissions</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/document/" class="nav-link">
                                    <i class="nav-icon fas fa-file-alt"></i> <p>Documents</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/employe/" class="nav-link">
                                    <i class="nav-icon fas fa-users"></i> <p>Employes</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/etatprojet/" class="nav-link">
                                    <i class="nav-icon fas fa-info-circle"></i> <p>Etat projets</p>
                                </a>
                            
                            </li>
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/etattache/" class="nav-link">
                                    <i class="nav-icon fas fa-tasks"></i> <p>Etat taches</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/incident/" class="nav-link">
                                    <i class="nav-icon fas fas fa-exclamation-triangle"></i> <p>Incidents</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/maitreouvrage/" class="nav-link">
                                    <i class="nav-icon fas fa-landmark"></i> <p>Maitre ouvrages</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/marchet/" class="nav-link">
                                    <i class="nav-icon fas fa-shopping-cart"></i> <p>Marchets</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/notificationseen/" class="nav-link">
                                    <i class="nav-icon fas fa-circle"></i> <p>Notification seens</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/projet/" class="nav-link">
                                    <i class="nav-icon fas fa-project-diagram"></i> <p>Projets</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/ressource/" class="nav-link">
                                    <i class="nav-icon fas fa-cogs"></i> <p>Ressources</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/suiviincident/" class="nav-link">
                                    <i class="nav-icon fas fa-tasks"></i> <p>Suivi incidents</p>
                                </a>
                            
                            </li>
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/suivitache/" class="nav-link">
                                    <i class="nav-icon fas fa-tasks"></i> <p>Suivi taches</p>
                                </a>
                            
                            </li>
                        
                        
                        
                        
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/tache/" class="nav-link">
                                    <i class="nav-icon fas fa-tasks"></i> <p>Taches</p>
                                </a>
                            
                            </li>
                            <li class="nav-item">
                                
                                <a href="/admin/Gestion_projet/utilisationressource/" class="nav-link">
                                    <i class="nav-icon fas fa-table"></i> <p>Utilisation ressources</p>
                                </a>
                            
                            </li>
                                    
                                
                               <li class="nav-header">Jeton d&#x27;authentification</li>
                                    
                                    
                                        <li class="nav-item">
                                            
                                            <a href="/admin/authtoken/tokenproxy/" class="nav-link">
                                                <i class="nav-icon fas fa-circle"></i> <p>Jetons</p>
                                            </a>
                                        
                                        </li>
                                    
                                
                            
                        </ul>
                    </nav>
                </div>
            </aside>
        
        
    

    <div class="content-wrapper" >
        
            
            <div class="content border-bottom mb-2">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 col-md-auto d-flex flex-grow-1 align-items-center">
                            <h1 class="h4 m-0 pr-3 mr-3 border-right">Le tableaux de bord des Taches</h1>
                            
  

                        </div>
                        <div class="col-12 col-md-auto d-flex align-items-center justify-content-end page-actions">
                        
                        </div>
                    
                                    </div>
                                </div>
                            </div>
                            
    

{% block content %}
<style>
    form {
        width: 70%;
        margin: 0 auto; /* Centers the form horizontally */
        margin-bottom: 00px; /* Reduce space between form and divs below */
    }

    form p {
        display: none; /* Hide the labels */
    }

    .btnnnn {
        display: inline-block; /* Makes the button inline-block to fit content */
        margin-top: 10px; /* Adds some space between the form fields and the button */
        background-color: rgba(54, 162, 235, 0.5); /* Sets button background color */
        border: none; /* Removes button border */
        color: white; /* Sets text color to white */
        padding: 10px 20px; /* Adds padding to the button */
        cursor: pointer; /* Changes cursor to pointer on hover */
       
    }

    .info {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px; /* Adds space between form elements */
    }

    .canvas-container {
        margin-right: 20px;
        margin-left: 20px;
        flex: 1; /* Allow input field to take up remaining space */
    }

    input[type="text"] {
        width: 100%; /* Make the input field longer */
        padding: 10px; /* Add padding to the input field */
        box-sizing: border-box; /* Include padding and border in input width */
    }
    select {
        width: 100%; /* Make the input field longer */
        padding: 10px; /* Add padding to the input field */
        box-sizing: border-box; /* Include padding and border in input width */
    }

    canvas {
        border: 1px solid #ccc; /* Add border to canvas as needed */
    }

    .description {
        flex: 1; /* Allow the description to grow to fill available space */
        margin-left: 20px; /* Adds space between the input and button */
    }
    .error {
    color: red; /* Sets text color to red */
    font-size: 14px; /* Adjust font size as needed */
    margin-left: 30%;
    font-style: italic;
    
}
body {
  position: relative;
  background-color: #F4F6F9; /* Set background color */

}

    
.node rect {
      fill: #F4F6F9;
      stroke: #343A40;
    }
    .project-name, .task-name {
      font-weight: bold; /* Make the project and task names bold */
    }
    .project-name {
      font-size: 16px;
      fill: #343A40;
    }
    .task-name {
      font-size: 14px;
      fill: #343A40;
    }
    .progress {
      font-size: 12px;
    }
    .progress.red {
      fill: red;
    }
    .progress.orange {
      fill: orange;
    }
    .progress.green {
      fill: green;
    }
  
        
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<form method="post">
    {% csrf_token %}
    <div class="info">
        <div class="canvas-container">
            {{ form_tache.nom_tache }}
        </div>
        <button type="submit" class="btnnnn" name="submit_tache">Submit</button>
        
    </div>
</form>
{% if message %}
            <p class="error">-{{ message }}</p>
        {% endif%}

{% if taches_general %}

<h3 style="margin-left: 30px;">  Le plan structure du projet "{{msggg}}" :</h3>


<div id="wbs-container"></div>
<script src="https://d3js.org/d3.v7.min.js"></script>

<script>
    function createProjectGraph(data, containerElement) {
        // Set up SVG element
        const svg = d3.select(containerElement).append("svg");

        // Define node dimensions and spacing
        const nodeHeight = 60;
        const nodeSpacingX = 50;
        const nodeSpacingY = 80;
        const arrowHeadSize = 10;
        const padding = 20; // Padding around text inside node
        const minWidth = 100; // Minimum width of the node

        // Function to measure text width
        function getTextWidth(text, fontSize = "14px") {
            const tempText = svg.append("text")
                .attr("font-size", fontSize)
                .attr("class", "temp-text")
                .attr("x", -9999)
                .attr("y", -9999)
                .text(text);

            const textWidth = tempText.node().getBBox().width;
            tempText.remove();
            return textWidth;
        }

        // Function to calculate the width and height of the diagram
        function calculateDiagramSize(data) {
            let maxNodesInLevel = 0;
            let totalNodes = 0;

            function calculate(data, level = 0) {
                maxNodesInLevel = Math.max(maxNodesInLevel, data.children ? data.children.length : 0);
                totalNodes++;
                if (data.children) data.children.forEach(child => calculate(child, level + 1));
            }

            calculate(data);
            const diagramWidth = maxNodesInLevel * (minWidth + nodeSpacingX) - nodeSpacingX;
            const diagramHeight = totalNodes * (nodeHeight + nodeSpacingY) - nodeSpacingY;
            return { width: diagramWidth, height: diagramHeight };
        }

        // Function to draw nodes recursively
        function drawNode(nodeData, parentX, parentY) {
            const nodeWidth = Math.max(getTextWidth(nodeData.name) + padding * 2, minWidth);
            const nodeGroup = svg.append("g").attr("class", "node").attr("transform", `translate(${parentX}, ${parentY})`);

            nodeGroup.append("rect")
                .attr("width", nodeWidth)
                .attr("height", nodeHeight)
                .attr("rx", 5)
                .attr("ry", 5);

            nodeGroup.append("text")
                .attr("class", nodeData.type === "projet" ? "project-name" : "task-name")
                .attr("x", nodeWidth / 2)
                .attr("y", 20)
                .attr("text-anchor", "middle")
                .text(nodeData.name);

            nodeGroup.append("text")
                .attr("x", nodeWidth / 2)
                .attr("y", 40)
                .attr("text-anchor", "middle")
                .attr("class", `progress ${getProgressColorClass(nodeData.progress)}`)
                .text(`Progress: ${nodeData.progress}%`);

            nodeGroup.append("text")
                .attr("x", nodeWidth / 2)
                .attr("y", 55)
                .attr("text-anchor", "middle")
                .attr("font-size", "12px")
                .text(nodeData.type === "projet" ? `Durée: ${nodeData.duree} mois` : `Durée: ${nodeData.duree} jours`);

            if (nodeData.children) {
                let childX;
                let childY;

                if (nodeData.children.length === 1) {
                    childX = parentX + nodeWidth / 2 - nodeWidth / 2;
                    childY = parentY + nodeHeight + nodeSpacingY;
                } else {
                    childX = parentX + nodeWidth / 2 - (Math.max(getTextWidth(nodeData.children[0].name) + padding * 2, minWidth) + nodeSpacingX) * (nodeData.children.length - 1) / 2;
                    childY = parentY + nodeHeight + nodeSpacingY;
                }

                for (const child of nodeData.children) {
                    const childNodeWidth = Math.max(getTextWidth(child.name) + padding * 2, minWidth);
                    const childNodeX = childX + childNodeWidth / 2;
                    const childNodeY = childY + nodeHeight / 2;

                    svg.append("line")
                        .attr("x1", parentX + nodeWidth / 2)
                        .attr("y1", parentY + nodeHeight)
                        .attr("x2", childNodeX)
                        .attr("y2", childNodeY)
                        .attr("stroke", "#333")
                        .attr("stroke-width", 2)
                        .attr("marker-end", "url(#arrowhead)");

                    drawNode(child, childX, childY);
                    childX += childNodeWidth + nodeSpacingX;
                }
            }
        }

        function getProgressColorClass(progress) {
            if (progress >= 0 && progress <= 25) {
                return "red";
            } else if (progress >= 26 && progress <= 75) {
                return "orange";
            } else if (progress >= 76 && progress <= 100) {
                return "green";
            } else {
                return "";
            }
        }

        const { width, height } = calculateDiagramSize(data);
        const containerWidth = containerElement.clientWidth;
        svg.attr("width", containerWidth).attr("height", height + 100); // Use the container's width and height + 100px

        const marker = svg.append("defs")
            .append("marker")
            .attr("id", "arrowhead")
            .attr("markerWidth", arrowHeadSize)
            .attr("markerHeight", arrowHeadSize)
            .attr("refX", arrowHeadSize)
            .attr("refY", arrowHeadSize / 2)
            .attr("orient", "auto")
            .append("path")
            .attr("d", `M 0 0 L ${arrowHeadSize}, ${arrowHeadSize / 2} L 0,${arrowHeadSize} Z`)
            .attr("fill", "#333");

        drawNode(data, (containerWidth - width) / 2+60, 10); // Position the root node in the center horizontally
    }

    const wbsData = {{ wbs_data|safe }};
    if (wbsData) {
        createProjectGraph(wbsData, document.getElementById("wbs-container"));
    } else {
        console.error("WBS data not available");
    }
</script>

  





{% else %}
<div class="grid-container">
    <div class="info">
        <div class="description">
            <h3>L'etat d'avancement de tache <span style="font-weight: 800;">"{{tache.nom_tache}}"</span>:</h3>
            
            <li>l'avancement de tache le cas normal doit etre <span style="color: blue;font-size: 20px;font-weight: 800; ">{{ avancement_normal }}%</span> par jour.</li>
            <li>l'etat d'avancement est <span style="color: {{avnc_color}};font-size: 20px;font-weight: 800; ">{{ avancement }}</span>.</li>
            {% if tache_non_finis%}
            {% if not tache_pas_commence %}
            <li>l'avancement de tache est <span style="color: {{avnc_color}};font-size: 20px;font-weight: 800;"> {{progressParJour}}%</span> par jour.</li>
            <li>A ce rythme la date de fin de tache sera etre <span style="font-size: 20px;font-weight: 800;">{{ dateF }}</span> tel que la date précisé été <span style="font-size: 20px;font-weight: 800;">{{ tache.date_fin}}</span> alors la differences est <span style="color: {{avnc_color}};font-size: 20px;font-weight: 800;">{{dif_jour}}</span> jours.</li>
            {% if tache.avancement == '4' or tache.avancement == '5' %}
                <li style="color: {{avnc_color}};font-weight: 800;">Vous devez <span style="text-decoration: underline;">modifier</span> la date fin de tache ou controler l'avancement.</li>
            {% endif %}
            {% else %}
            <li>le progress de tache est <span style="color: red;font-size: 20px;font-weight: 800;">0% </span>, Vous devez commencer et entrer dans le rythme d'avancement .</li>
            
            {% endif %}
            {% endif %}

        </div>
    
    </div>
    <div class="info">
        
        <div class="description">
            <h3>L'analyse des Employés</h3>
            <p>Dans ces graphes, le nombre des employés de tache <span style="font-weight: 800;">{{tache.nom_tache}}</span> par le paramètre choisi : </p>
            
            <select id="analysisParameter1">
                <option value="poste">Par poste de l'employé</option>
                <option value="etat">Par l'état familiale de l'employé</option>

            </select>
        </div>
        <div class="canvas-container">
            <canvas id="chart1" width="500px" height="350px"></canvas>
        </div>

    </div>

    <div class="info">
        <div class="canvas-container">
            <canvas id="chart2" width="500px" height="350px"></canvas>
        </div>
        <div class="description">
            <h3>L'analyse des utilisations des ressources</h3>
            <p>Dans ces graphes, les utilisations des ressources de tache <span style="font-weight: 800;">{{tache.nom_tache}}</span> par le paramètre choisi : </p>
            
            <select id="analysisParameter2">
                <option value="duree">Par la durée de l'utilisation</option>
                <option value="etatR">Par l'état de ressource</option>
                <option value="typeR">Par le type de ressource</option>

            </select>
        </div>
        

    </div>

</div>

<script>
    const analysisParameterSelect = document.getElementById('analysisParameter1');
        const ctx1 = document.getElementById('chart1');
        let myChart1;

        function updateChart1() {
            // Get the selected analysis parameter
            const analysisParameter1 = analysisParameterSelect.value;

            // Define chart data based on the selected parameter
            let chartData1;
            switch (analysisParameter1) {
                case 'poste':
                    chartData1 = {
                        labels: [{% for x in poste_employe %}'{{x}}',{% endfor %}],
                        datasets: [{
                            label: 'Nombres des employés',
                            data: [{% for x in count_poste_employe %}{{x}},{% endfor %}],
                            borderWidth: 1,
                            backgroundColor: [
                            "rgba(255, 140, 0, 0.5)", // darkorange
                            "rgba(255, 159, 64, 0.5)", // orangelight

                                        "rgba(255, 206, 86, 0.5)", //sfer
                                        "rgba(75, 192, 192, 0.5)", //khder
                                        "rgba(153, 102, 255, 0.5)", // violet
                                        "rgba(255, 165, 0, 0.5)" , // orange
                                        "rgba(255, 99, 132, 0.5)",  // 7mer
                                        "rgba(255, 0, 255, 0.5)", // fuchsia
                                        "rgba(54, 162, 235, 0.5)", //zre9
                                        "rgba(218, 112, 214, 0.5)", // orchid
                                        "rgba(218, 165, 32, 0.5)", // goldenrod
                                        "rgba(255, 20, 147, 0.5)" // deeppink
                            ],
                        }]
                    };
                    break;
                case 'etat':
                    chartData1 = {
                        labels: [{% for x in etat_employe %}'{{x}}',{% endfor %}],
                        datasets: [{
                            label: 'Nombres des employés',
                            data: [{% for x in count_etat_employe %}{{x}},{% endfor %}],
                            borderWidth: 1,
                            backgroundColor: [
                            "rgba(153, 102, 255, 0.5)", // violet

                                "rgba(255, 159, 64, 0.5)", // orangelight

                            ],
                        }]
                    };
                    break;
                
                default:
                    // Handle default case or unsupported parameters
                    break;
            }

            // Destroy the previous chart instance if it exists
            if (myChart1) {
                myChart1.destroy();
            }

            // Create a new chart with the updated data
            myChart1 = new Chart(ctx1, {
                type: 'doughnut',
                data: chartData1,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Add event listener to update the chart when the analysis parameter changes
        analysisParameterSelect.addEventListener('change', updateChart1);

        // Initial chart setup
        updateChart1();


    const analysisParameterSelect2 = document.getElementById('analysisParameter2');
        const ctx2 = document.getElementById('chart2');
        let myChart2;

        function updateChart2() {
            // Get the selected analysis parameter
            const analysisParameter2 = analysisParameterSelect2.value;

            // Define chart data based on the selected parameter
            let chartData2;
            switch (analysisParameter2) {
                case 'duree':
                    chartData2 = {
                        labels: [{% for x in duree_ressource %}'{{x}}',{% endfor %}],
                        datasets: [{
                            label: 'Nombres des utilisations ressources',
                            data: [{% for x in count_duree_ressource %}{{x}},{% endfor %}],
                            borderWidth: 1,
                            backgroundColor: [
                            "rgba(153, 102, 255, 0.5)", // violet
                            "rgba(75, 192, 192, 0.5)", //khder

                                "rgba(255, 159, 64, 0.5)", // orangelight
                                        
                            ],
                        }]
                    };
                    break;
                case 'etatR':
                    chartData2 = {
                        labels: [{% for x in etat_ressource %}'{{x}}',{% endfor %}],
                        datasets: [{
                            label: 'Nombres des ressources',
                            data: [{% for x in count_etat_ressource %}{{x}},{% endfor %}],
                            borderWidth: 1,
                            backgroundColor: [
                            "rgba(153, 102, 255, 0.5)", // violet
                            "rgba(75, 192, 192, 0.5)", //khder

                                "rgba(255, 159, 64, 0.5)", // orangelight

                            ],
                        }]
                    };
                    break;
                case 'typeR':
                    chartData2 = {
                        labels: [{% for x in type_ressource %}'{{x}}',{% endfor %}],
                        datasets: [{
                            label: 'Nombres des ressources',
                            data: [{% for x in count_type_ressource %}{{x}},{% endfor %}],
                            borderWidth: 1,
                            backgroundColor: [
                            "rgba(255, 140, 0, 0.5)", // darkorange
                            "rgba(255, 159, 64, 0.5)", // orangelight

                                        "rgba(255, 206, 86, 0.5)", //sfer
                                        "rgba(75, 192, 192, 0.5)", //khder
                                        "rgba(153, 102, 255, 0.5)", // violet
                                        "rgba(255, 165, 0, 0.5)" , // orange
                                        "rgba(255, 99, 132, 0.5)",  // 7mer
                                        "rgba(255, 0, 255, 0.5)", // fuchsia
                                        "rgba(54, 162, 235, 0.5)", //zre9
                                        "rgba(218, 112, 214, 0.5)", // orchid
                                        "rgba(218, 165, 32, 0.5)", // goldenrod
                                        "rgba(255, 20, 147, 0.5)" // deeppink
                            ],
                        }]
                    };
                    break;
                
                default:
                    // Handle default case or unsupported parameters
                    break;
            }

            // Destroy the previous chart instance if it exists
            if (myChart2) {
                myChart2.destroy();
            }

            // Create a new chart with the updated data
            myChart2 = new Chart(ctx2, {
                type: 'bar',
                data: chartData2,
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Add event listener to update the chart when the analysis parameter changes
        analysisParameterSelect2.addEventListener('change', updateChart2);

        // Initial chart setup
        updateChart2();
</script>
{% endif%}
    
{% endblock %}
</div>
</div>